{% assign navurl = site.url | append: site.baseurl | append: page.url | remove: '.html' %}
<ul>
{% for item in include.nav %}
    {% if item.url %}
      {% assign fullUrl = item.url %}
    {% else %}
      {% assign fullUrl = item.text | replace:"/","-" | replace:" ","-"
        | downcase | append:"/" %}
    {% endif %}
    {% assign fullUrl = fullUrl | prepend:include.base %}
    <li>
      <!-- Leading slash so our links are not relative to
      currently navigated page (baaaad!) -->
        <a href="{{ fullUrl }}">
            {% if navurl contains fullUrl %}
                <b>{{ item.text }}</b>
            {% else %}
                {{ item.text }}
            {% endif %}
        </a>
    </li>
    {% if item.subitems and navurl contains fullUrl %}
      <!-- Allows for skipping the "/" in menu.yml entries -->
        {% include nav.html nav=item.subitems base=fullUrl %}
    {% endif %}
{% endfor %}
</ul>
