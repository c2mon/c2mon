<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" 
  xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
	                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
                      http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">
    
  <!-- initialize the iBatis SqlMapClient -->
	<!--  <bean id="sqlMapClient" class="org.springframework.orm.ibatis.SqlMapClientFactoryBean">-->
	<!--   <property name="dataSource" ref="dataSource"/>-->
	<!--   <property name="configLocation" value="classpath:sqlmap/config/cache.dbaccess-sql-config.xml"/>-->
	<!--  </bean>-->
	  
	  <!-- initialize the Spring wrapper around the iBatis SqlMapClient -->
	<!--  <bean id="sqlMapClientTemplate" class="org.springframework.orm.ibatis.SqlMapClientTemplate">-->
	<!--   <property name="sqlMapClient" ref="sqlMapClient"/>-->
	<!--  </bean>-->
	  
	<!--  <bean id="dataTagCacheDAO" class="cern.c2mon.server.cache.dbaccess.datatag.IbatisDataTagCacheDAO">-->
	<!--   <property name="sqlMapClientTemplate" ref="sqlMapClientTemplate"/>-->
	<!--  </bean>-->
  
    
  <bean id="cacheTransactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="cacheDataSource"/>    
  </bean>
  
  <tx:annotation-driven transaction-manager="cacheTransactionManager"/>
	
	<!--<aop:config proxy-target-class="true"/>-->
	<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
	  <property name="configLocation" value="classpath:cern/c2mon/server/cache/dbaccess/sqlmaps/sql-map-config.xml"/>
	  <property name="dataSource" ref="cacheDataSource"/>
	</bean>
	  
	<bean id="dataTagMapper" class="org.mybatis.spring.mapper.MapperFactoryBean">
	  <property name="sqlSessionFactory" ref="sqlSessionFactory"/>
	  <property name="mapperInterface" value="cern.c2mon.server.cache.dbaccess.DataTagMapper"/>
	</bean>
	
	<bean id="controlTagMapper" class="org.mybatis.spring.mapper.MapperFactoryBean">
	  <property name="sqlSessionFactory" ref="sqlSessionFactory"/>
	  <property name="mapperInterface" value="cern.c2mon.server.cache.dbaccess.ControlTagMapper"/>
	</bean>
	
	<bean id="ruleTagMapper" class="org.mybatis.spring.mapper.MapperFactoryBean">
	  <property name="sqlSessionFactory" ref="sqlSessionFactory"/>
	  <property name="mapperInterface" value="cern.c2mon.server.cache.dbaccess.RuleTagMapper"/>
	</bean>
	
	<bean id="processMapper" class="org.mybatis.spring.mapper.MapperFactoryBean">
	  <property name="sqlSessionFactory" ref="sqlSessionFactory"/>
	  <property name="mapperInterface" value="cern.c2mon.server.cache.dbaccess.ProcessMapper"/>
	</bean>
	
	<bean id="equipmentMapper" class="org.mybatis.spring.mapper.MapperFactoryBean">
	  <property name="sqlSessionFactory" ref="sqlSessionFactory"/>
	  <property name="mapperInterface" value="cern.c2mon.server.cache.dbaccess.EquipmentMapper"/>
	</bean>
	
	<bean id="subEquipmentMapper" class="org.mybatis.spring.mapper.MapperFactoryBean">
	  <property name="sqlSessionFactory" ref="sqlSessionFactory"/>
	  <property name="mapperInterface" value="cern.c2mon.server.cache.dbaccess.SubEquipmentMapper"/>
	</bean>
	
	<bean id="aliveTimerMapper" class="org.mybatis.spring.mapper.MapperFactoryBean">
	  <property name="sqlSessionFactory" ref="sqlSessionFactory"/>
	  <property name="mapperInterface" value="cern.c2mon.server.cache.dbaccess.AliveTimerMapper"/>
	</bean>
	
	<bean id="commFaultTagMapper" class="org.mybatis.spring.mapper.MapperFactoryBean">
	  <property name="sqlSessionFactory" ref="sqlSessionFactory"/>
	  <property name="mapperInterface" value="cern.c2mon.server.cache.dbaccess.CommFaultTagMapper"/>
	</bean>
	
	<bean id="commandTagMapper" class="org.mybatis.spring.mapper.MapperFactoryBean">
    <property name="sqlSessionFactory" ref="sqlSessionFactory"/>
    <property name="mapperInterface" value="cern.c2mon.server.cache.dbaccess.CommandTagMapper"/>
  </bean>
  
  <bean id="alarmMapper" class="org.mybatis.spring.mapper.MapperFactoryBean">
    <property name="sqlSessionFactory" ref="sqlSessionFactory"/>
    <property name="mapperInterface" value="cern.c2mon.server.cache.dbaccess.AlarmMapper"/>
  </bean>
  
</beans>
